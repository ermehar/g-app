<%- include('includes/header'); %>
<%- include('includes/nav'); %>

  <main role="main">

    <div class="album py-5 bg-light">
      <div class="container">
        <div class="row featurette">
          <div class="col-md-12 mar-b-10">
            <a href="\" class="btn btn-outline-dark">ü†ê  Back</a>
            <hr>
          </div>
          <% if (apps.length <= 0){%>
             <div class="col-md-12 mar-b-10">
              <div class="alert alert-info">
                <b>Sorry</b> We do not found the application in our database. Please go back and select any app.
              </div>
            </div>
          <% } %>

          <% if (apps.length > 0){%>
            <div class="col-12">
              <div class="row">
                <div class="col-md-7 order-md-2">
                  <h2 class="featurette-heading align-bottom ">
                    <a href="<%= apps[0].url %>" target="_blank"><%= apps[0].title %></a> <span class="float-right txt15"> Rating: <%= apps[0].scoreText %>/5</span></h2>
                  <div class="row">
                    <div class="col-4">Developer: <%= apps[0].developer %></div>
                    <div class="col-4">Genre: <%= apps[0].genre %></div>
                    <div class="col-4 text-right">Reviews: <%= apps[0].ratings %></div>
                  </div>
                  <p class="lead">
                    <%- apps[0].descriptionHTML %>
                  </p>

                </div>
                <div class="col-md-5 order-md-1">
                  <img src="<%= apps[0].icon %>" class="img-fluid" alt="<%= apps[0].title %>">
                </div>
              </div>
            </div>

            <% if(apps[0].screenshots.length > 0){ %>
            <div class="col-12"><hr></div>
            
            <div class="col-12">
              <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner">
                  <div class="carousel-item active">
                    <div class="row">
                      <% 
                      var k=0;
                      for(i=0; i < apps[0].screenshots.length; i++){ 
                      %>
                        <% if(k < 3){ %>
                        <div class="col-4">
                          <img src="<%= apps[0].screenshots[i] %>" class="d-block w-100">
                        </div>
                        <% }else{  k=0; %>
                            </div> <!-- ./row-->
                          </div> <!-- ./carousel-item-->
                          <div class="carousel-item">
                            <div class="row">
                              <div class="col-4">
                                <img src="<%= apps[0].screenshots[i] %>" class="d-block w-100">
                              </div>
                        <% } %>
                      <% k++ } %>
                    </div>
                  </div>

                    <!-- <div class="carousel-item">
                      <div class="row">
                        <div class="col-4">
                          <img src="" class="d-block w-100">
                        </div>
                        <div class="col-4">
                          <img src="" class="d-block w-100">
                        </div>
                        <div class="col-4">
                          <img src="" class="d-block w-100">
                        </div>
                      </div>
                    </div> -->
                </div>
                <a class="carousel-control carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="sr-only">Next</span>
                </a>
              </div>
            </div>
            <% } %>

            <div class="col-12"><hr></div>
            <div class="col-12">Additional information</div>
            <div class="col-12">
              <div class="row">
                <div class="col-4"><b>Updated</b></div>
                <div class="col-4"><b>Size</b></div>
                <div class="col-4"><b>Installs</b></div>
              </div>
              <div class="row">
                <div class="col-4"><% 
                  var date = new Date( apps[0].updated ); 
                  var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
                  var UpdatedDate  = date.getDate()+ " " + months[date.getMonth()] + " " + date.getFullYear();
                  %>
                    <%= UpdatedDate %>
                  </div>
                <div class="col-4"><%= apps[0].size %></div>
                <div class="col-4"><%= apps[0].installs %></div>
              </div>
            </div>
            <div class="col-12">
              <hr>
            </div>
            <div class="col-12">
              <div class="row">
                <div class="col-4"><b>Current Version</b></div>
                <div class="col-4"><b>Requires Android</b></div>
                <div class="col-4"><b>Content Rating</b></div>
              </div>
              <div class="row">
                <div class="col-4"><%= apps[0].version %></div>
                <div class="col-4"><%= apps[0].androidVersionText %></div>
                <div class="col-4"><%- apps[0].contentRating + "<br/>" + apps[0].contentRatingDescription %></div>
              </div>
            </div>
            <div class="col-12">
              <hr>
            </div>
            <div class="col-12">
              <div class="row">
                <div class="col-4"><b>Offered By</b></div>
                <div class="col-4"><b>Developer</b></div>
              </div>
              <div class="row">
                <div class="col-4"><%= apps[0].developer %></div>
                <div class="col-4">
                   
                    <a href="<%= apps[0].developerWebsite %>" target="_blank">Visit Site</a>
                    <br>
                    <a href="mailto:<%= apps[0].developerEmail %>"><%= apps[0].developerEmail %></a>
                    <br>
                    <a href="<%= apps[0].privacyPolicy %>"  target="_blank">Privacy Policy</a>
                </div>
              </div>
            </div>
            
          <% } %>
        
        </div>
      
      </div>
    </div>

  </main>

<%- include('includes/footer'); %>